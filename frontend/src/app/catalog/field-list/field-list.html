<div class="field-list-container">
  <!-- Page Header -->
  <div class="page-header">
    <h2>Catalogue des Fili√®res Acad√©miques</h2>
    <p>Explorez et d√©couvrez les formations qui correspondent √† vos aspirations</p>
  </div>

  <!-- Filters Section -->
  <div class="filter-section">
    <input 
      type="text" 
      [formControl]="searchControl" 
      placeholder="üîç Rechercher par nom, description, comp√©tences..." 
      class="search-input"
    >
    
    <select [formControl]="durationFilterControl" class="filter-select">
      <option value="">üìÖ Toutes les dur√©es</option>
      <option value="3">3 Ans</option>
      <option value="4">4 Ans</option>
      <option value="5">5 Ans</option>
      <option value="6">6+ Ans</option>
    </select>
  </div>

  <!-- Results Info -->
  <div class="results-info" *ngIf="!loading && fields.length > 0">
    <div class="results-count">
      <strong>{{ totalItems }}</strong> fili√®re{{ totalItems > 1 ? 's' : '' }} trouv√©e{{ totalItems > 1 ? 's' : '' }}
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <p>‚è≥ Chargement des fili√®res...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-state">
    <p>‚ùå {{ error }}</p>
  </div>

  <!-- Fields Grid -->
  <div *ngIf="!loading && fields.length > 0" class="fields-grid">
    <div *ngFor="let field of fields" class="field-card">
      <!-- Favorite Button -->
      <button 
        *ngIf="authService.isAuthenticatedSubject.value" 
        (click)="toggleFavorite(field)" 
        class="favorite-button"
        [class.favorited]="field.isFavorited"
        [title]="field.isFavorited ? 'Retirer des favoris' : 'Ajouter aux favoris'"
      >
        {{ field.isFavorited ? '‚ù§Ô∏è' : 'ü§ç' }}
      </button>

      <!-- Field Title -->
      <h3>
        <a [routerLink]="['/catalog', field.id]">{{ field.name }}</a>
      </h3>

      <!-- Description -->
      <p class="field-description">
        {{ field.description.length > 150 ? (field.description | slice:0:150) + '...' : field.description }}
      </p>

      <!-- Meta Information -->
      <div class="field-meta">
        <div class="meta-item">
          <span class="meta-badge">{{ field.duration_years }} ans</span>
        </div>
      </div>

      <!-- Skills Tags -->
      <div class="field-tags" *ngIf="field.required_skills && field.required_skills.length > 0">
        <span class="tag" *ngFor="let skill of field.required_skills.slice(0, 3)">
          {{ skill }}
        </span>
        <span class="tag" *ngIf="field.required_skills.length > 3">
          +{{ field.required_skills.length - 3 }}
        </span>
      </div>

      <!-- Career Opportunities -->
      <div class="field-tags" *ngIf="field.career_opportunities && field.career_opportunities.length > 0">
        <span class="tag" *ngFor="let career of field.career_opportunities.slice(0, 2)" style="background: #e0f2fe; color: #0369a1;">
          üíº {{ career }}
        </span>
        <span class="tag" *ngIf="field.career_opportunities.length > 2" style="background: #e0f2fe; color: #0369a1;">
          +{{ field.career_opportunities.length - 2 }}
        </span>
      </div>

      <!-- View Details Link -->
      <a [routerLink]="['/catalog', field.id]" class="view-details-link">
        Voir les d√©tails
      </a>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && fields.length === 0 && !error" class="empty-state">
    <p>üîç Aucune fili√®re trouv√©e</p>
    <p style="font-size: 0.9rem; color: #9ca3af;">Essayez de modifier vos crit√®res de recherche</p>
  </div>

  <!-- Pagination -->
  <div *ngIf="!loading && fields.length > 0" class="pagination">
    <button (click)="prevPage()" [disabled]="currentPage === 1">
      ‚Üê Pr√©c√©dent
    </button>
    <span>Page {{ currentPage }} sur {{ totalPages }}</span>
    <button (click)="nextPage()" [disabled]="currentPage === totalPages">
      Suivant ‚Üí
    </button>
  </div>
</div>