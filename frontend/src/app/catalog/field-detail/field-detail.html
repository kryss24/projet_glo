<div class="field-detail-container">
  <!-- Back Button -->
  <a routerLink="/catalog" class="back-button">
    Retour au catalogue
  </a>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <p>â³ Chargement des dÃ©tails de la filiÃ¨re...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-state">
    <p>âŒ {{ error }}</p>
    <p style="font-size: 0.9rem; margin-top: 0.5rem;">Redirection vers le catalogue...</p>
  </div>

  <!-- Field Details -->
  <div *ngIf="field && !loading">
    <!-- Header Section -->
    <div class="field-header">
      <h2>{{ field.name }}</h2>
      <p class="field-subtitle">Formation acadÃ©mique de {{ field.duration_years }} ans</p>
      
      <button 
        *ngIf="authService.isAuthenticatedSubject.value" 
        (click)="toggleFavorite()" 
        class="favorite-button"
        [class.favorited]="field.isFavorited"
        [title]="field.isFavorited ? 'Retirer des favoris' : 'Ajouter aux favoris'"
      >
        {{ field.isFavorited ? 'â¤ï¸' : 'ğŸ¤' }}
      </button>
    </div>

    <!-- Quick Stats -->
    <div class="quick-stats">
      <div class="stat-card">
        <div class="stat-icon">ğŸ“…</div>
        <div class="stat-value">{{ field.duration_years }} ans</div>
        <div class="stat-label">DurÃ©e d'Ã©tudes</div>
      </div>

      <div class="stat-card" *ngIf="field.required_skills && field.required_skills.length > 0">
        <div class="stat-icon">ğŸ¯</div>
        <div class="stat-value">{{ field.required_skills.length }}</div>
        <div class="stat-label">CompÃ©tences requises</div>
      </div>

      <div class="stat-card" *ngIf="field.career_opportunities && field.career_opportunities.length > 0">
        <div class="stat-icon">ğŸ’¼</div>
        <div class="stat-value">{{ field.career_opportunities.length }}</div>
        <div class="stat-label">DÃ©bouchÃ©s</div>
      </div>

      <div class="stat-card" *ngIf="field.institutions && field.institutions.length > 0">
        <div class="stat-icon">ğŸ«</div>
        <div class="stat-value">{{ field.institutions.length }}</div>
        <div class="stat-label">Ã‰tablissements</div>
      </div>
    </div>

    <!-- Content Grid -->
    <div class="content-grid">
      <!-- Description Section -->
      <div class="content-section">
        <h3 class="section-title">ğŸ“– Description</h3>
        <p class="description-text">{{ field.description }}</p>
      </div>

      <!-- Additional Info Section -->
      <div class="content-section">
        <h3 class="section-title">â„¹ï¸ Informations complÃ©mentaires</h3>
        <div class="info-list">
          <div class="info-item" *ngIf="field.admission_criteria">
            <div class="info-label">CritÃ¨res d'admission</div>
            <div class="info-value">{{ field.admission_criteria }}</div>
          </div>

          <div class="info-item" *ngIf="field.tuition_fees_min && field.tuition_fees_max">
            <div class="info-label">Frais de scolaritÃ©</div>
            <div class="info-value">
              {{ field.tuition_fees_min | number:'1.0-0' }} - {{ field.tuition_fees_max | number:'1.0-0' }} FCFA
            </div>
          </div>

          <div class="info-item">
            <div class="info-label">DurÃ©e des Ã©tudes</div>
            <div class="info-value">{{ field.duration_years }} ans</div>
          </div>
        </div>
      </div>

      <!-- Skills Section -->
      <div class="content-section" *ngIf="field.required_skills && field.required_skills.length > 0">
        <h3 class="section-title">ğŸ¯ CompÃ©tences requises</h3>
        <div class="tags-container">
          <span class="tag skill-tag" *ngFor="let skill of field.required_skills">
            âœ“ {{ skill }}
          </span>
        </div>
      </div>

      <!-- Career Opportunities Section -->
      <div class="content-section" *ngIf="field.career_opportunities && field.career_opportunities.length > 0">
        <h3 class="section-title">ğŸ’¼ DÃ©bouchÃ©s professionnels</h3>
        <div class="tags-container">
          <span class="tag career-tag" *ngFor="let career of field.career_opportunities">
            {{ career }}
          </span>
        </div>
      </div>

      <!-- Institutions Section -->
      <div class="content-section">
        <h3 class="section-title">ğŸ« Ã‰tablissements proposant cette formation</h3>
        
        <div *ngIf="field.institutions && field.institutions.length > 0" class="institutions-grid">
          <div *ngFor="let institution of field.institutions" class="institution-card">
            <div class="institution-header">
              <h4>{{ institution.name }}</h4>
              <span class="institution-type" [class.public]="institution.type === 'public'" [class.private]="institution.type === 'private'">
                {{ institution.type === 'public' ? 'Public' : 'PrivÃ©' }}
              </span>
            </div>

            <div class="institution-description" *ngIf="institution.description">
              {{ institution.description }}
            </div>
          </div>
        </div>

        <div *ngIf="!field.institutions || field.institutions.length === 0" class="empty-state">
          <p>ğŸ« Aucun Ã©tablissement listÃ© pour cette filiÃ¨re pour le moment</p>
        </div>
      </div>
    </div>
  </div>
</div>